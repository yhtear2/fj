<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="User">

	<select id="getUserCount" resultType="java.lang.Integer">
		SELECT 	COUNT(*)
		FROM 	FJ_User
	</select>

	<select id="getUserList" parameterType="Map" resultType="dto.user.UserDataBean">
		SELECT 	user_history_id,email,resome_title,kor_name,eng_name,tel,birth,address,army,want_salary,license,
				skill,photo,reg_date,last_date,project,r
		FROM 	( select user_history_id,email,resome_title,kor_name,eng_name,tel,birth,address,army,want_salary,license,
				skill,photo,reg_date,last_date,project,rownum r 
		FROM	FJ_User  ORDER BY last_date desc ) 
		WHERE	r &gt;= #{start} and r &lt;= #{end}		
	</select>
	
	<select id="getContent" parameterType="Integer" resultType="dto.user.UserDataBean">
		SELECT 	* 
		From	FJ_User
		Where	user_history_id = #{user_history_id}
	</select>

	<insert id="insertArticle" parameterType="dto.user.UserDataBean"  keyColumn="user_history_id" keyProperty="history_id" useGeneratedKeys="true">
	
	
		insert into FJ_User values( FJ_User_seq.NEXTVAL,#{email, jdbcType=VARCHAR},#{eng_name, jdbcType=VARCHAR}, #{kor_name, jdbcType=VARCHAR},
		#{tel, jdbcType=VARCHAR}, #{birth, jdbcType=VARCHAR}, #{address, jdbcType=VARCHAR}, #{army, jdbcType=VARCHAR}, #{want_salary ,jdbcType=INTEGER},
		#{license, jdbcType=VARCHAR}, #{skill, jdbcType=VARCHAR},#{photo, jdbcType=VARCHAR}, #{reg_date}, #{last_date}, #{project, jdbcType=VARCHAR},
		#{resome_title, jdbcType=VARCHAR}, #{ref ,jdbcType=INTEGER})
	</insert>
	

	<insert id="insertArticle_career" parameterType="dto.user.UserDataBean" >

		insert into FJ_Career values( FJ_Career_seq.NEXTVAL,#{user_history_id, jdbcType=INTEGER},#{career_sort, jdbcType=VARCHAR}, #{career_comp_name, jdbcType=VARCHAR},
		#{career_start_date, jdbcType=VARCHAR}, #{career_last_date, jdbcType=VARCHAR}, #{career_sort_date, jdbcType=VARCHAR}, #{career_kind, jdbcType=VARCHAR}, #{career_department, jdbcType=VARCHAR}, #{career_position1,jdbcType=VARCHAR},
		#{career_position2, jdbcType=VARCHAR}, #{career_salary, jdbcType=INTEGER},#{career_resign, jdbcType=VARCHAR},#{career_work, jdbcType=VARCHAR},
		#{career_content, jdbcType=VARCHAR})
	</insert>


	<insert id="insertArticle_introduce" parameterType="dto.user.IntroduceDataBean" >

		insert into FJ_Introduce values( FJ_Introduce_seq.NEXTVAL,#{user_history_id, jdbcType=INTEGER},#{intro_title, jdbcType=VARCHAR}, #{intro_contents, jdbcType=VARCHAR},
		#{intro_reg_date}, #{intro_last_date})
	</insert>	
	

	<insert id="insertArticle_sc" parameterType="dto.user.SchoolDataBean">
		insert into FJ_School ( school_id, user_history_id,school_kind,school_start_date,school_last_date,school_college1,
		school_college2,school_college_high,school_name,school_name_kind,school_major,school_rank,reg_date,last_date)
		values (FJ_School_seq.NEXTVAL,#{user_history_id},#{school_kind,jdbcType=VARCHAR},
		#{school_start_date,jdbcType=VARCHAR},#{school_last_date,jdbcType=VARCHAR},#{school_college1,jdbcType=VARCHAR},
		#{school_college2,jdbcType=VARCHAR},#{school_college_high,jdbcType=VARCHAR},#{school_name,jdbcType=VARCHAR},#{school_name_kind,jdbcType=VARCHAR},
		#{school_major,jdbcType=VARCHAR},#{school_rank,jdbcType=VARCHAR},#{reg_date},#{last_date})
	</insert>

	<select id="getUser_history_id" parameterType="Integer" resultType="dto.user.UserDataBean">
		select * from FJ_User where user_history_id = #{user_history_id}
	</select>
</mapper>	

