<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="Recruit">
	<select id="getRecruitCount" resultType="java.lang.Integer">
		SELECT 	COUNT(*)
		FROM 	FJ_RECRUIT
	</select>

	<select id="getRecruitList" parameterType="Map" resultType="dto.recruit.RecruitDataBean">
		SELECT 	recruit_id,email,title,content,name,skill,gender,edu,work_type,work_day,work_area,
				business_part,incharge,tel,min_career,max_career,min_age,max_age,start_date,end_date,
				min_salary,max_salary,people_count,readcount,reg_date,last_date,r 
		FROM 	( select recruit_id,email,title,content,name,skill,gender,edu,work_type,work_day,work_area,
				business_part,incharge,tel,start_date,end_date,min_career,max_career,min_age,max_age,
				min_salary,max_salary,people_count,readcount,reg_date,last_date, rownum r 
		FROM	FJ_RECRUIT  ORDER BY last_date desc ) 
		WHERE	r &gt;= #{start} and r &lt;= #{end}		
	</select>

	<insert id="insertRecruit" parameterType="dto.recruit.RecruitDataBean">
		insert into 
		FJ_RECRUIT(
			recruit_id,
			email,						title,
			content,					name, 
			skill,						gender,
			edu,						work_type,
			work_day,					work_area,
			business_part,				incharge,
			tel,						start_date,
			end_date,					min_salary,
			max_salary,					min_career,
			max_career,					min_age,
			max_age,					people_count,
			readcount,					reg_date,
			last_date
		) values(
			FJ_Recruit_seq.NEXTVAL,
			#{email, jdbcType=VARCHAR},				#{title, jdbcType=VARCHAR},
			#{content, jdbcType=VARCHAR},			#{name, jdbcType=VARCHAR}, 
			#{skill, jdbcType=VARCHAR},				#{gender, jdbcType=VARCHAR},
			#{edu, jdbcType=VARCHAR},				#{work_type, jdbcType=VARCHAR},
			#{work_day, jdbcType=VARCHAR},			#{work_area, jdbcType=VARCHAR},
			#{business_part, jdbcType=VARCHAR},		#{incharge, jdbcType=VARCHAR},
			#{tel, jdbcType=VARCHAR},				#{start_date, jdbcType=VARCHAR},
			#{end_date, jdbcType=VARCHAR},			#{min_salary},
			#{max_salary},							#{min_career},
			#{max_career},							#{min_age},
			#{max_age},								#{people_count},
			#{readcount},							#{reg_date},
			#{last_date}
		)
	</insert>
	
	<select id="getContent" parameterType="Integer" resultType="dto.recruit.RecruitDataBean">
		SELECT 	* 
		From	FJ_RECRUIT
		Where	recruit_id = #{recruit_id}
	</select>
	
	<update id="addReadContent" parameterType="Integer" >
		UPDATE 	FJ_RECRUIT 
		SET 	readcount = readcount + 1 
		Where	recruit_id = #{recruit_id}
	</update>
	
	<select id="getRecruitEmail" parameterType="Map" resultType="dto.user.UserDataBean">
		SELECT 	* 
		From	FJ_USER
		Where	#{min_salary} &gt;= want_salary or want_salary &lt;= #{max_salary}
		<!-- And		skill like '%#{skill}%' -->
	</select>
</mapper>	








